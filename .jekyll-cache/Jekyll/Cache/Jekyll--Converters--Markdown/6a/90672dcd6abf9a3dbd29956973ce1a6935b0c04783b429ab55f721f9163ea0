I"ë0<p>If youâ€™ve used any @font-face icon fonts, whether with twitter-boostrap or Zurb, or elsewhere, you know they can be handy. Its nice from a rails perspective to have them bundled up in an engine, and its nice to have an easy-to-remember name to find them with.</p>

<p>Its relatively easy to find free or low-cost icon fonts that you can use with @font-face. The problem is that they might not be Rails ready, and there might be a few hundred in a font, when you only need 10. If youâ€™d like to be picky about which icons you include in your app, or perhaps you want different icons from different font sets, follow along.</p>

<p>There are lots of ways to get a set of icon fonts. Iâ€™m choosing to use Fontello.</p>

<p>So, to start off, <strong>go to <a href="http://fontello.com">Fontello</a> and create the set of icons that you want to use. Download and unzip.</strong></p>

<p>Weâ€™ll be modifying the instructions for gemifying assets that can be found in Derek Priorâ€™s blog at <a href="http://prioritized.net/blog/gemify-assets-for-rails">prioritized.net</a>.</p>

<hr />

<ol>
  <li>Use Bundler to create the gem</li>
</ol>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>bundle gem myfonts</code></pre></figure>

<ol>
  <li>Edit lib/myfonts.rb and add:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Engine</span> <span class="o">&lt;</span> <span class="o">::</span><span class="no">Rails</span><span class="o">::</span><span class="no">Engine</span>
   <span class="k">end</span></code></pre></figure>

<ol>
  <li>Weâ€™re going to add everything we need to the vendor directory.</li>
</ol>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> vendor/assets/fonts
  <span class="nv">$ </span><span class="nb">mkdir </span>vendor/assets/stylesheets</code></pre></figure>

<ol>
  <li>
    <p>The fontello download contains a font directory with several fonts in it. Copy the contents of that directory to the fonts directory you just created.</p>
  </li>
  <li>
    <p>Edit the .gemspec file and change gem.files to:</p>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span><span class="p">.</span><span class="nf">files</span> <span class="o">=</span> <span class="no">Dir</span><span class="p">[</span><span class="s2">"{lib,vendor}/**/*"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"LICENSE.txt"</span><span class="p">,</span> <span class="s2">"README.md"</span><span class="p">]</span></code></pre></figure>

<ol>
  <li>Then add:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span><span class="p">.</span><span class="nf">add_dependency</span> <span class="s2">"railties"</span><span class="p">,</span> <span class="s2">"~&gt; 3.1"</span></code></pre></figure>

<ol>
  <li>You should also edit the gem description and summary to their proper values. Here is my gemspec as a sample result:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"> <span class="n">lib</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'../lib'</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">)</span>
    <span class="vg">$LOAD_PATH</span><span class="p">.</span><span class="nf">unshift</span><span class="p">(</span><span class="n">lib</span><span class="p">)</span> <span class="k">unless</span> <span class="vg">$LOAD_PATH</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="n">lib</span><span class="p">)</span>
    <span class="nb">require</span> <span class="s1">'myfonts/version'</span>
    <span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">gem</span><span class="o">|</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">name</span>          <span class="o">=</span> <span class="s2">"myfonts"</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">version</span>       <span class="o">=</span> <span class="no">Myfonts</span><span class="o">::</span><span class="no">VERSION</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">authors</span>       <span class="o">=</span> <span class="p">[</span><span class="s2">"David Moulton"</span><span class="p">]</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">email</span>         <span class="o">=</span> <span class="p">[</span><span class="s2">"dave@themoultons.net"</span><span class="p">]</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">description</span>   <span class="o">=</span> <span class="sx">%q{Demo gem for icon fonts}</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">summary</span>       <span class="o">=</span> <span class="sx">%q{Demo of how to create icon fonts for rails}</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">homepage</span>      <span class="o">=</span> <span class="s2">"https://github.com/dmoulton/myfonts-demo"</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">files</span> <span class="o">=</span> <span class="no">Dir</span><span class="p">[</span><span class="s2">"{lib,vendor}/**/*"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"LICENSE.txt"</span><span class="p">,</span> <span class="s2">"README.md"</span><span class="p">]</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">executables</span>   <span class="o">=</span> <span class="n">gem</span><span class="p">.</span><span class="nf">files</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">%r{^bin/}</span><span class="p">).</span><span class="nf">map</span><span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="no">File</span><span class="p">.</span><span class="nf">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">}</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">test_files</span>    <span class="o">=</span> <span class="n">gem</span><span class="p">.</span><span class="nf">files</span><span class="p">.</span><span class="nf">grep</span><span class="p">(</span><span class="sr">%r{^(test|spec|features)/}</span><span class="p">)</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">require_paths</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"lib"</span><span class="p">]</span>
      <span class="n">gem</span><span class="p">.</span><span class="nf">add_dependency</span> <span class="s2">"railties"</span><span class="p">,</span> <span class="s2">"~&gt; 3.1"</span>
    <span class="k">end</span></code></pre></figure>

<ol>
  <li>
    <p>Copy the fontello.css file from the fontello download to vendor/assets/stylesheets. I havenâ€™t needed the other css files.</p>
  </li>
  <li>
    <p>Rename the fontello.css file</p>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span><span class="nb">mv </span>vendor/assets/stylesheets/fontello.css vendor/assets/stylesheets/myfonts.css</code></pre></figure>

<ol>
  <li>You will need to edit the src: lines in the css file to look for the fonts in assets. I count 5 places to edit in my demo.</li>
</ol>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">"/assets/fontello.eot"</span><span class="o">);</span>
  <span class="nt">src</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s1">"/assets/fontello.eot?#iefix"</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">'embedded-opentype'</span><span class="o">),</span> <span class="nt">url</span><span class="o">(</span><span class="s1">"/assets/fontello.woff"</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">'woff'</span><span class="o">),</span> <span class="nt">url</span><span class="o">(</span><span class="s1">"/assets/fontello.ttf"</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">'truetype'</span><span class="o">),</span> <span class="nt">url</span><span class="o">(</span><span class="s1">"/assets/fontello.svg#fontello"</span><span class="o">)</span> <span class="nt">format</span><span class="o">(</span><span class="s2">'svg'</span><span class="o">);</span></code></pre></figure>

<ol>
  <li>If you would like a convenient way to change the colors of the icons, add something like this at the end of the css file:</li>
</ol>

<figure class="highlight"><pre><code class="language-css" data-lang="css"> <span class="nc">.icon-red</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nc">.icon-green</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="no">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nc">.icon-white</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
      <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
    <span class="p">}</span></code></pre></figure>

<ol>
  <li>The above will allow you to use html such as:</li>
</ol>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">&lt;</span><span class="nt">i</span> <span class="nt">class</span><span class="o">=</span><span class="s2">'icon-emo-happy icon-green'</span><span class="o">&gt;&lt;/</span><span class="nt">i</span><span class="o">&gt;</span></code></pre></figure>

<ol>
  <li>Youâ€™ll add this to your rails app as you normally would any other gem. I would recommend not pushing to rubygems.org, and just serving the gem from github or bitbucket or your own gem server. Use this example, changing the url to your own, unless you want to use my 4 emoticons:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="s1">'myfonts'</span><span class="p">,</span> <span class="ss">:git</span><span class="o">=&gt;</span><span class="s1">'git://github.com/dmoulton/myfonts-demo.git'</span></code></pre></figure>

<ol>
  <li>You should then edit your app/assets/stylesheets/application.css file using this example, remembering that its the name of the css file, sans extension, that you should use.</li>
</ol>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/*
 * ...
 *
 *= require myfonts
 *= require_self
 *= require_tree .
 */</span></code></pre></figure>

<ol>
  <li>You can then use html like this:</li>
</ol>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"icon-emo-happy"</span><span class="nt">&gt;&lt;/i&gt;</span></code></pre></figure>

<p>Thatâ€™s about it. If you would like to see my demos, they can be found here:</p>

<p>Gem: <a href="https://github.com/dmoulton/myfonts-demo">https://github.com/dmoulton/myfonts-demo</a></p>

<p>Rails App: <a href="https://github.com/dmoulton/myfonts-demo-app">https://github.com/dmoulton/myfonts-demo-app</a></p>

<hr />

<p>###Resources</p>

<p><a href="http://prioritized.net/blog/gemify-assets-for-rails">Derek Priorâ€™s blog entry on gemifying assets</a></p>

<p><a href="http://fontello.com">Fontello</a></p>
:ET